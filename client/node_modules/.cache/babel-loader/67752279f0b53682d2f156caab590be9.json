{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { createElement as $, useState, useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport { auth } from '../../firebase';\nimport { useSelector } from 'react-redux';\n\nconst Register = ({\n  history\n}) => {\n  _s();\n\n  const [email, setEmail] = useState('');\n  const userState = useSelector(state => ({ ...state\n  })); // When component mount check if user is not already logged in, if he is, redirect him to '/'\n\n  useEffect(() => {\n    if (userState.user && userState.user.token) history.push('/');\n  }, [userState.user], []);\n\n  const handleSubmit = async e => {\n    try {\n      e.preventDefault();\n      const config = {\n        url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\n        handleCodeInApp: true\n      };\n      await auth.sendSignInLinkToEmail(email, config);\n      toast.success(`Email is send to ${email}. Click the link to complete registration`); // Save user email in localStorage\n\n      window.localStorage.setItem('emailForRegistration', email); // Clear state\n\n      setEmail('');\n    } catch (error) {\n      console.log(error);\n      setEmail('');\n    }\n  };\n\n  return /*#__PURE__*/$('div', {\n    className: 'container p-5'\n  }, /*#__PURE__*/$('div', {\n    className: 'row'\n  }, /*#__PURE__*/$('div', {\n    className: 'col-md-6 offset-md-3'\n  }, /*#__PURE__*/$('h4', null, 'Register'), /*#__PURE__*/$('h6', null, 'Register Form'), /*#__PURE__*/$('form', {\n    onSubmit: handleSubmit\n  }, /*#__PURE__*/$('input', {\n    type: 'email',\n    className: 'form-control',\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    autoFocus: true\n  }), /*#__PURE__*/$('button', {\n    type: 'submit',\n    className: 'btn btn-raiser'\n  }, 'Register')))));\n};\n\n_s(Register, \"zTp3IhUN76yIfo72usB+EUzeANI=\", false, function () {\n  return [useSelector];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/jonathann-gs/Documents/E-commerce/client/src/pages/auth/Register.js"],"names":["createElement","$","useState","useEffect","toast","auth","useSelector","Register","history","email","setEmail","userState","state","user","token","push","handleSubmit","e","preventDefault","config","url","process","env","REACT_APP_REGISTER_REDIRECT_URL","handleCodeInApp","sendSignInLinkToEmail","success","window","localStorage","setItem","error","console","log","className","onSubmit","type","value","onChange","target","autoFocus"],"mappings":";;AAAA,SAASA,aAAa,IAAIC,CAA1B,EAA6BC,QAA7B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,IAAT,QAAqB,gBAArB;AACA,SAASC,WAAT,QAA4B,aAA5B;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAAA;;AAChC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,EAAD,CAAlC;AAEA,QAAMS,SAAS,GAAGL,WAAW,CAAEM,KAAD,KAAY,EAAE,GAAGA;AAAL,GAAZ,CAAD,CAA7B,CAHgC,CAKhC;;AACAT,EAAAA,SAAS,CACP,MAAM;AACJ,QAAIQ,SAAS,CAACE,IAAV,IAAkBF,SAAS,CAACE,IAAV,CAAeC,KAArC,EAA4CN,OAAO,CAACO,IAAR,CAAa,GAAb;AAC7C,GAHM,EAIP,CAACJ,SAAS,CAACE,IAAX,CAJO,EAKP,EALO,CAAT;;AAQA,QAAMG,YAAY,GAAG,MAAOC,CAAP,IAAa;AAChC,QAAI;AACFA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAMC,MAAM,GAAG;AACbC,QAAAA,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,+BADJ;AAEbC,QAAAA,eAAe,EAAE;AAFJ,OAAf;AAKA,YAAMnB,IAAI,CAACoB,qBAAL,CAA2BhB,KAA3B,EAAkCU,MAAlC,CAAN;AACAf,MAAAA,KAAK,CAACsB,OAAN,CACG,oBAAmBjB,KAAM,2CAD5B,EARE,CAYF;;AACAkB,MAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,sBAA5B,EAAoDpB,KAApD,EAbE,CAeF;;AACAC,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACD,KAjBD,CAiBE,OAAOoB,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACApB,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACD;AACF,GAtBD;;AAuBA,sBAAOT,CAAC,CACN,KADM,EAEN;AAAEgC,IAAAA,SAAS,EAAE;AAAb,GAFM,eAGNhC,CAAC,CACC,KADD,EAEC;AAAEgC,IAAAA,SAAS,EAAE;AAAb,GAFD,eAGChC,CAAC,CACC,KADD,EAEC;AAAEgC,IAAAA,SAAS,EAAE;AAAb,GAFD,eAGChC,CAAC,CAAC,IAAD,EAAO,IAAP,EAAa,UAAb,CAHF,eAICA,CAAC,CAAC,IAAD,EAAO,IAAP,EAAa,eAAb,CAJF,eAKCA,CAAC,CACC,MADD,EAEC;AAAEiC,IAAAA,QAAQ,EAAElB;AAAZ,GAFD,eAGCf,CAAC,CAAC,OAAD,EAAU;AACTkC,IAAAA,IAAI,EAAE,OADG;AAETF,IAAAA,SAAS,EAAE,cAFF;AAGTG,IAAAA,KAAK,EAAE3B,KAHE;AAIT4B,IAAAA,QAAQ,EAAGpB,CAAD,IAAOP,QAAQ,CAACO,CAAC,CAACqB,MAAF,CAASF,KAAV,CAJhB;AAKTG,IAAAA,SAAS,EAAE;AALF,GAAV,CAHF,eAWCtC,CAAC,CACC,QADD,EAEC;AAAEkC,IAAAA,IAAI,EAAE,QAAR;AAAkBF,IAAAA,SAAS,EAAE;AAA7B,GAFD,EAGC,UAHD,CAXF,CALF,CAHF,CAHK,CAAR;AA+BD,CApED;;GAAM1B,Q;UAGcD,W;;;KAHdC,Q;AAsEN,eAAeA,QAAf","sourcesContent":["import { createElement as $, useState, useEffect } from 'react'\nimport { toast } from 'react-toastify'\nimport { auth } from '../../firebase'\nimport { useSelector } from 'react-redux'\n\nconst Register = ({ history }) => {\n  const [email, setEmail] = useState('')\n\n  const userState = useSelector((state) => ({ ...state }))\n\n  // When component mount check if user is not already logged in, if he is, redirect him to '/'\n  useEffect(\n    () => {\n      if (userState.user && userState.user.token) history.push('/')\n    },\n    [userState.user],\n    [],\n  )\n\n  const handleSubmit = async (e) => {\n    try {\n      e.preventDefault()\n      const config = {\n        url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\n        handleCodeInApp: true,\n      }\n\n      await auth.sendSignInLinkToEmail(email, config)\n      toast.success(\n        `Email is send to ${email}. Click the link to complete registration`,\n      )\n\n      // Save user email in localStorage\n      window.localStorage.setItem('emailForRegistration', email)\n\n      // Clear state\n      setEmail('')\n    } catch (error) {\n      console.log(error)\n      setEmail('')\n    }\n  }\n  return $(\n    'div',\n    { className: 'container p-5' },\n    $(\n      'div',\n      { className: 'row' },\n      $(\n        'div',\n        { className: 'col-md-6 offset-md-3' },\n        $('h4', null, 'Register'),\n        $('h6', null, 'Register Form'),\n        $(\n          'form',\n          { onSubmit: handleSubmit },\n          $('input', {\n            type: 'email',\n            className: 'form-control',\n            value: email,\n            onChange: (e) => setEmail(e.target.value),\n            autoFocus: true,\n          }),\n\n          $(\n            'button',\n            { type: 'submit', className: 'btn btn-raiser' },\n            'Register',\n          ),\n        ),\n      ),\n    ),\n  )\n}\n\nexport default Register\n"]},"metadata":{},"sourceType":"module"}