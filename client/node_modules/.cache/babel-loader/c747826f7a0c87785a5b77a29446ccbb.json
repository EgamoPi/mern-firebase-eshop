{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable no-underscore-dangle */\nimport { createElement as $, useState, useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { updateSubcategory, getSubcategory } from '../../../functions/subcategory';\nimport { getCategories } from '../../../functions/category';\nimport AdminNav from '../../../components/nav/AdminNav';\nimport CategoryForm from '../../../components/forms/CategoryForm';\n\nconst SubUpdate = ({\n  match,\n  history\n}) => {\n  _s();\n\n  // State for form control\n  const [name, setName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [parent, setParent] = useState(''); // Retrieve admin token\n\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  })); // Function to load categories and save it into the state\n\n  const loadCategories = () => {\n    getCategories().then(c => setCategories(c.data));\n  }; // Function to load subcategories and save it into the state\n\n\n  const loadSubcategory = () => {\n    getSubcategory(match.params.slug, user.token).then(s => {\n      setName(s.data.name);\n      setParent(s.data.parent);\n    });\n  };\n\n  useEffect(() => {\n    loadCategories();\n    loadSubcategory();\n  }, []);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    updateSubcategory(match.params.slug, {\n      name,\n      parent\n    }, user.token).then(res => {\n      setLoading(false);\n      setName('');\n      toast.success(`\"${name}\" is updated`);\n      history.push('/admin/sub');\n    }).catch(err => {\n      setLoading(false);\n      console.log(err.response);\n      if (err.response.status === 400) toast.error(err.response.data.name);\n      setName('');\n    });\n  };\n\n  return /*#__PURE__*/$('div', {\n    className: 'container-fluid'\n  }, /*#__PURE__*/$('div', {\n    className: 'row'\n  }, /*#__PURE__*/$('div', {\n    className: 'col-md-2'\n  }, /*#__PURE__*/$(AdminNav)), /*#__PURE__*/$('div', {\n    className: 'col'\n  }, loading ? /*#__PURE__*/$('h4', {\n    className: 'text-danger'\n  }, 'Loading ...') : /*#__PURE__*/$('h4', null, 'Update Sub Category'), /*#__PURE__*/$('div', {\n    className: 'form-group'\n  }, /*#__PURE__*/$('label', null, 'Category'), /*#__PURE__*/$('select', {\n    name: 'category',\n    className: 'form-control',\n    onChange: e => setParent(e.target.value)\n  }, /*#__PURE__*/$('option', null, 'Please Select'), categories.length > 0 && categories.map(c => /*#__PURE__*/$('option', {\n    key: c._id,\n    value: c._id\n  }, c.name)))), /*#__PURE__*/$(CategoryForm, {\n    handleSubmit,\n    name,\n    setName\n  }), /*#__PURE__*/$('br'))));\n};\n\n_s(SubUpdate, \"WA15dXbj+vdELB2ICdMsDGbDQB0=\", false, function () {\n  return [useSelector];\n});\n\n_c = SubUpdate;\nexport default SubUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"SubUpdate\");","map":{"version":3,"sources":["/Users/jonathann-gs/Documents/E-commerce/client/src/pages/admin/subcategory/SubUpdate.js"],"names":["createElement","$","useState","useEffect","toast","useSelector","Link","updateSubcategory","getSubcategory","getCategories","AdminNav","CategoryForm","SubUpdate","match","history","name","setName","loading","setLoading","categories","setCategories","parent","setParent","user","state","loadCategories","then","c","data","loadSubcategory","params","slug","token","s","handleSubmit","e","preventDefault","res","success","push","catch","err","console","log","response","status","error","className","onChange","target","value","length","map","key","_id"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\n/* eslint-disable no-underscore-dangle */\nimport { createElement as $, useState, useEffect } from 'react'\nimport { toast } from 'react-toastify'\nimport { useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport {\n  updateSubcategory,\n  getSubcategory,\n} from '../../../functions/subcategory'\nimport { getCategories } from '../../../functions/category'\nimport AdminNav from '../../../components/nav/AdminNav'\nimport CategoryForm from '../../../components/forms/CategoryForm'\n\nconst SubUpdate = ({ match, history }) => {\n  // State for form control\n  const [name, setName] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [categories, setCategories] = useState([])\n  const [parent, setParent] = useState('')\n\n  // Retrieve admin token\n  const { user } = useSelector((state) => ({ ...state }))\n\n  // Function to load categories and save it into the state\n  const loadCategories = () => {\n    getCategories().then((c) => setCategories(c.data))\n  }\n  // Function to load subcategories and save it into the state\n  const loadSubcategory = () => {\n    getSubcategory(match.params.slug, user.token).then((s) => {\n      setName(s.data.name)\n      setParent(s.data.parent)\n    })\n  }\n\n  useEffect(() => {\n    loadCategories()\n    loadSubcategory()\n  }, [])\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    setLoading(true)\n    updateSubcategory(match.params.slug, { name, parent }, user.token)\n      .then((res) => {\n        setLoading(false)\n        setName('')\n        toast.success(`\"${name}\" is updated`)\n        history.push('/admin/sub')\n      })\n      .catch((err) => {\n        setLoading(false)\n        console.log(err.response)\n        if (err.response.status === 400) toast.error(err.response.data.name)\n        setName('')\n      })\n  }\n\n  return $(\n    'div',\n    { className: 'container-fluid' },\n    $(\n      'div',\n      { className: 'row' },\n      $('div', { className: 'col-md-2' }, $(AdminNav)),\n      $(\n        'div',\n        { className: 'col' },\n        loading\n          ? $('h4', { className: 'text-danger' }, 'Loading ...')\n          : $('h4', null, 'Update Sub Category'),\n        $(\n          'div',\n          { className: 'form-group' },\n          $('label', null, 'Category'),\n          $(\n            'select',\n            {\n              name: 'category',\n              className: 'form-control',\n              onChange: (e) => setParent(e.target.value),\n            },\n            $('option', null, 'Please Select'),\n            categories.length > 0 &&\n              categories.map((c) =>\n                $('option', { key: c._id, value: c._id }, c.name),\n              ),\n          ),\n        ),\n        $(CategoryForm, {\n          handleSubmit,\n          name,\n          setName,\n        }),\n        $('br'),\n      ),\n    ),\n  )\n}\nexport default SubUpdate\n"]},"metadata":{},"sourceType":"module"}