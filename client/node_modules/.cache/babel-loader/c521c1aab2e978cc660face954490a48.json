{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\nimport { createElement as $, useState, useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons';\nimport { createCategory, getCategories, deleteCategory } from '../../../functions/category';\nimport AdminNav from '../../../components/nav/AdminNav';\nimport CategoryForm from '../../../components/forms/CategoryForm';\n\nconst CategoryCreate = () => {\n  _s();\n\n  // State for form control\n  const [name, setName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]); // State for filtering\n\n  const [keyword, setKeyword] = useState(''); // Retrieve admin token\n\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  })); // Function to load categories and save it into the state\n\n  const loadCategories = () => {\n    getCategories().then(category => setCategories(category.data));\n  };\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const handleSearchChange = e => {\n    e.preventDefault();\n    setKeyword(e.target.value.toLowerCase());\n  };\n\n  const searched = keyword => c => c.name.toLowerCase().includes(keyword);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    createCategory({\n      name\n    }, user.token).then(res => {\n      setLoading(false);\n      setName('');\n      toast.success(`\"${name}\" is created`);\n      loadCategories();\n    }).catch(err => {\n      setLoading(false);\n      console.log(err.response);\n      if (err.response.status === 400) toast.error(err.response.data.name);\n      setName('');\n    });\n  };\n\n  const handleRemove = async slug => {\n    if (window.confirm('Delete')) {\n      setLoading(true);\n      deleteCategory(slug, user.token).then(res => {\n        setLoading(false);\n        toast.error(`${res.data.name} deleted !`);\n        loadCategories();\n      }).catch(err => {\n        if (err.response.status === 400) {\n          setLoading(false);\n          toast.error(err.response.data.name);\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/$('div', {\n    className: 'container-fluid'\n  }, /*#__PURE__*/$('div', {\n    className: 'row'\n  }, /*#__PURE__*/$('div', {\n    className: 'col-md-2'\n  }, /*#__PURE__*/$(AdminNav)), /*#__PURE__*/$('div', {\n    className: 'col'\n  }, loading ? /*#__PURE__*/$('h4', {\n    className: 'text-danger'\n  }, 'Loading ...') : /*#__PURE__*/$('h4', null, 'Create Category'), /*#__PURE__*/$(CategoryForm, {\n    handleSubmit,\n    name,\n    setName\n  }), /*#__PURE__*/$('input', {\n    type: 'search',\n    placeholder: 'Filter',\n    value: keyword,\n    onChange: handleSearchChange,\n    className: 'form-control mb-4'\n  }), /*#__PURE__*/$('br'), categories.filter(searched(keyword)).map(c => /*#__PURE__*/$('div', {\n    className: 'alert alert-primary',\n    key: c.id\n  }, `${c.name} `, /*#__PURE__*/$('span', {\n    className: 'btn btn-sm float-right',\n    onClick: () => handleRemove(c.slug)\n  }, /*#__PURE__*/$(DeleteOutlined, {\n    className: 'text-danger'\n  })), /*#__PURE__*/$(Link, {\n    to: `/admin/category/${c.slug}`\n  }, /*#__PURE__*/$('span', {\n    className: 'btn btn-sm float-right'\n  }, /*#__PURE__*/$(EditOutlined, {\n    className: 'text-warning'\n  }))))))));\n};\n\n_s(CategoryCreate, \"PXYcFSShwAry5N/4XIKB9L2Y+nw=\", false, function () {\n  return [useSelector];\n});\n\n_c = CategoryCreate;\nexport default CategoryCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"CategoryCreate\");","map":{"version":3,"sources":["/Users/jonathann-gs/Documents/E-commerce/client/src/pages/admin/category/CategoryCreate.js"],"names":["createElement","$","useState","useEffect","toast","useSelector","Link","DeleteOutlined","EditOutlined","createCategory","getCategories","deleteCategory","AdminNav","CategoryForm","CategoryCreate","name","setName","loading","setLoading","categories","setCategories","keyword","setKeyword","user","state","loadCategories","then","category","data","handleSearchChange","e","preventDefault","target","value","toLowerCase","searched","c","includes","handleSubmit","token","res","success","catch","err","console","log","response","status","error","handleRemove","slug","window","confirm","className","type","placeholder","onChange","filter","map","key","id","onClick","to"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\nimport { createElement as $, useState, useEffect } from 'react'\nimport { toast } from 'react-toastify'\nimport { useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons'\nimport {\n  createCategory,\n  getCategories,\n  deleteCategory,\n} from '../../../functions/category'\nimport AdminNav from '../../../components/nav/AdminNav'\nimport CategoryForm from '../../../components/forms/CategoryForm'\n\nconst CategoryCreate = () => {\n  // State for form control\n  const [name, setName] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [categories, setCategories] = useState([])\n\n  // State for filtering\n  const [keyword, setKeyword] = useState('')\n\n  // Retrieve admin token\n  const { user } = useSelector((state) => ({ ...state }))\n\n  // Function to load categories and save it into the state\n  const loadCategories = () => {\n    getCategories().then((category) => setCategories(category.data))\n  }\n\n  useEffect(() => {\n    loadCategories()\n  }, [])\n\n  const handleSearchChange = (e) => {\n    e.preventDefault()\n    setKeyword(e.target.value.toLowerCase())\n  }\n\n  const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword)\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    setLoading(true)\n    createCategory({ name }, user.token)\n      .then((res) => {\n        setLoading(false)\n        setName('')\n        toast.success(`\"${name}\" is created`)\n        loadCategories()\n      })\n      .catch((err) => {\n        setLoading(false)\n        console.log(err.response)\n        if (err.response.status === 400) toast.error(err.response.data.name)\n        setName('')\n      })\n  }\n\n  const handleRemove = async (slug) => {\n    if (window.confirm('Delete')) {\n      setLoading(true)\n      deleteCategory(slug, user.token)\n        .then((res) => {\n          setLoading(false)\n          toast.error(`${res.data.name} deleted !`)\n          loadCategories()\n        })\n        .catch((err) => {\n          if (err.response.status === 400) {\n            setLoading(false)\n            toast.error(err.response.data.name)\n          }\n        })\n    }\n  }\n  return $(\n    'div',\n    { className: 'container-fluid' },\n    $(\n      'div',\n      { className: 'row' },\n      $('div', { className: 'col-md-2' }, $(AdminNav)),\n      $(\n        'div',\n        { className: 'col' },\n        loading\n          ? $('h4', { className: 'text-danger' }, 'Loading ...')\n          : $('h4', null, 'Create Category'),\n        $(CategoryForm, {\n          handleSubmit,\n          name,\n          setName,\n        }),\n        $('input', {\n          type: 'search',\n          placeholder: 'Filter',\n          value: keyword,\n          onChange: handleSearchChange,\n          className: 'form-control mb-4',\n        }),\n        $('br'),\n        categories.filter(searched(keyword)).map((c) =>\n          $(\n            'div',\n            { className: 'alert alert-primary', key: c.id },\n            `${c.name} `,\n            $(\n              'span',\n              {\n                className: 'btn btn-sm float-right',\n                onClick: () => handleRemove(c.slug),\n              },\n              $(DeleteOutlined, { className: 'text-danger' }),\n            ),\n            $(\n              Link,\n              { to: `/admin/category/${c.slug}` },\n              $(\n                'span',\n                { className: 'btn btn-sm float-right' },\n                $(EditOutlined, { className: 'text-warning' }),\n              ),\n            ),\n          ),\n        ),\n      ),\n    ),\n  )\n}\nexport default CategoryCreate\n"]},"metadata":{},"sourceType":"module"}