{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable no-underscore-dangle */\nimport { createElement as $, useState, useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons';\nimport { createSubcategory, getSubcategories, deleteSubcategory } from '../../../functions/subcategory';\nimport { getCategories } from '../../../functions/category';\nimport AdminNav from '../../../components/nav/AdminNav';\nimport CategoryForm from '../../../components/forms/CategoryForm';\nimport LocalSearch from '../../../components/forms/LocalSearch';\n\nconst SubCreate = () => {\n  _s();\n\n  // State for form control\n  const [name, setName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [subcategories, setSubcategories] = useState([]);\n  const [category, setCategory] = useState(''); // State for filtering\n\n  const [keyword, setKeyword] = useState(''); // Retrieve admin token\n\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  })); // Function to load categories and save it into the state\n\n  const loadCategories = () => {\n    getCategories().then(c => setCategories(c.data));\n  }; // Function to load subcategories and save it into the state\n\n\n  const loadSubcategories = () => {\n    getSubcategories().then(c => setSubcategories(c.data));\n  };\n\n  useEffect(() => {\n    loadCategories();\n    loadSubcategories();\n  }, []);\n\n  const handleSearchChange = e => {\n    e.preventDefault();\n    setKeyword(e.target.value.toLowerCase());\n  };\n\n  const searched = kword => c => c.name.toLowerCase().includes(kword);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    createSubcategory({\n      name,\n      parent: category\n    }, user.token).then(res => {\n      setLoading(false);\n      setName('');\n      toast.success(`\"${name}\" is created`);\n    }).catch(err => {\n      setLoading(false);\n      console.log(err.response);\n      if (err.response.status === 400) toast.error(err.response.data.name);\n      setName('');\n    });\n  };\n\n  const handleRemove = async slug => {\n    if (window.confirm('Delete')) {\n      setLoading(true);\n      deleteSubcategory(slug, user.token).then(res => {\n        setLoading(false);\n        toast.error(`${res.data.name} deleted !`);\n      }).catch(err => {\n        if (err.response.status === 400) {\n          setLoading(false);\n          toast.error(err.response.data.name);\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/$('div', {\n    className: 'container-fluid'\n  }, /*#__PURE__*/$('div', {\n    className: 'row'\n  }, /*#__PURE__*/$('div', {\n    className: 'col-md-2'\n  }, /*#__PURE__*/$(AdminNav)), /*#__PURE__*/$('div', {\n    className: 'col'\n  }, loading ? /*#__PURE__*/$('h4', {\n    className: 'text-danger'\n  }, 'Loading ...') : /*#__PURE__*/$('h4', null, 'Create Sub Category'), /*#__PURE__*/$('div', {\n    className: 'form-group'\n  }, /*#__PURE__*/$('label', null, 'Category'), /*#__PURE__*/$('select', {\n    name: 'category',\n    className: 'form-control',\n    onChange: e => setCategory(e.target.value)\n  }, /*#__PURE__*/$('option', null, 'Please Select'), categories.length > 0 && categories.map(c => /*#__PURE__*/$('option', {\n    key: c._id,\n    value: c._id\n  }, c.name)))), /*#__PURE__*/$(CategoryForm, {\n    handleSubmit,\n    name,\n    setName\n  }), /*#__PURE__*/$(LocalSearch, {\n    keyword,\n    setKeyword\n  }), /*#__PURE__*/$('br'), subcategories.filter(searched(keyword)).map(s => /*#__PURE__*/$('div', {\n    className: 'alert alert-primary',\n    key: s._id\n  }, `${s.name} `, /*#__PURE__*/$('span', {\n    className: 'btn btn-sm float-right',\n    onClick: () => handleRemove(s.slug)\n  }, /*#__PURE__*/$(DeleteOutlined, {\n    className: 'text-danger'\n  })), /*#__PURE__*/$(Link, {\n    to: `/admin/category/${s.slug}`\n  }, /*#__PURE__*/$('span', {\n    className: 'btn btn-sm float-right'\n  }, /*#__PURE__*/$(EditOutlined, {\n    className: 'text-warning'\n  }))))))));\n};\n\n_s(SubCreate, \"wLQmL5jtJGxlGSAYrBFqlzGxuSQ=\", false, function () {\n  return [useSelector];\n});\n\n_c = SubCreate;\nexport default SubCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"SubCreate\");","map":{"version":3,"sources":["/Users/jonathann-gs/Documents/E-commerce/client/src/pages/admin/subcategory/SubCreate.js"],"names":["createElement","$","useState","useEffect","toast","useSelector","Link","DeleteOutlined","EditOutlined","createSubcategory","getSubcategories","deleteSubcategory","getCategories","AdminNav","CategoryForm","LocalSearch","SubCreate","name","setName","loading","setLoading","categories","setCategories","subcategories","setSubcategories","category","setCategory","keyword","setKeyword","user","state","loadCategories","then","c","data","loadSubcategories","handleSearchChange","e","preventDefault","target","value","toLowerCase","searched","kword","includes","handleSubmit","parent","token","res","success","catch","err","console","log","response","status","error","handleRemove","slug","window","confirm","className","onChange","length","map","key","_id","filter","s","onClick","to"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\n/* eslint-disable no-underscore-dangle */\nimport { createElement as $, useState, useEffect } from 'react'\nimport { toast } from 'react-toastify'\nimport { useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons'\nimport {\n  createSubcategory,\n  getSubcategories,\n  deleteSubcategory,\n} from '../../../functions/subcategory'\nimport { getCategories } from '../../../functions/category'\nimport AdminNav from '../../../components/nav/AdminNav'\nimport CategoryForm from '../../../components/forms/CategoryForm'\nimport LocalSearch from '../../../components/forms/LocalSearch'\n\nconst SubCreate = () => {\n  // State for form control\n  const [name, setName] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [categories, setCategories] = useState([])\n  const [subcategories, setSubcategories] = useState([])\n  const [category, setCategory] = useState('')\n\n  // State for filtering\n  const [keyword, setKeyword] = useState('')\n\n  // Retrieve admin token\n  const { user } = useSelector((state) => ({ ...state }))\n\n  // Function to load categories and save it into the state\n  const loadCategories = () => {\n    getCategories().then((c) => setCategories(c.data))\n  }\n  // Function to load subcategories and save it into the state\n  const loadSubcategories = () => {\n    getSubcategories().then((c) => setSubcategories(c.data))\n  }\n\n  useEffect(() => {\n    loadCategories()\n    loadSubcategories()\n  }, [])\n\n  const handleSearchChange = (e) => {\n    e.preventDefault()\n    setKeyword(e.target.value.toLowerCase())\n  }\n\n  const searched = (kword) => (c) => c.name.toLowerCase().includes(kword)\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    setLoading(true)\n    createSubcategory({ name, parent: category }, user.token)\n      .then((res) => {\n        setLoading(false)\n        setName('')\n        toast.success(`\"${name}\" is created`)\n      })\n      .catch((err) => {\n        setLoading(false)\n        console.log(err.response)\n        if (err.response.status === 400) toast.error(err.response.data.name)\n        setName('')\n      })\n  }\n\n  const handleRemove = async (slug) => {\n    if (window.confirm('Delete')) {\n      setLoading(true)\n      deleteSubcategory(slug, user.token)\n        .then((res) => {\n          setLoading(false)\n          toast.error(`${res.data.name} deleted !`)\n        })\n        .catch((err) => {\n          if (err.response.status === 400) {\n            setLoading(false)\n            toast.error(err.response.data.name)\n          }\n        })\n    }\n  }\n  return $(\n    'div',\n    { className: 'container-fluid' },\n    $(\n      'div',\n      { className: 'row' },\n      $('div', { className: 'col-md-2' }, $(AdminNav)),\n      $(\n        'div',\n        { className: 'col' },\n        loading\n          ? $('h4', { className: 'text-danger' }, 'Loading ...')\n          : $('h4', null, 'Create Sub Category'),\n        $(\n          'div',\n          { className: 'form-group' },\n          $('label', null, 'Category'),\n          $(\n            'select',\n            {\n              name: 'category',\n              className: 'form-control',\n              onChange: (e) => setCategory(e.target.value),\n            },\n            $('option', null, 'Please Select'),\n            categories.length > 0 &&\n              categories.map((c) =>\n                $('option', { key: c._id, value: c._id }, c.name),\n              ),\n          ),\n        ),\n        $(CategoryForm, {\n          handleSubmit,\n          name,\n          setName,\n        }),\n        $(LocalSearch, {\n          keyword,\n          setKeyword,\n        }),\n        $('br'),\n        subcategories.filter(searched(keyword)).map((s) =>\n          $(\n            'div',\n            { className: 'alert alert-primary', key: s._id },\n            `${s.name} `,\n            $(\n              'span',\n              {\n                className: 'btn btn-sm float-right',\n                onClick: () => handleRemove(s.slug),\n              },\n              $(DeleteOutlined, { className: 'text-danger' }),\n            ),\n            $(\n              Link,\n              { to: `/admin/category/${s.slug}` },\n              $(\n                'span',\n                { className: 'btn btn-sm float-right' },\n                $(EditOutlined, { className: 'text-warning' }),\n              ),\n            ),\n          ),\n        ),\n      ),\n    ),\n  )\n}\nexport default SubCreate\n"]},"metadata":{},"sourceType":"module"}